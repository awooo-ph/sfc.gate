<Window x:Class="SFC.Gate.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:SFC.Gate"
        xmlns:views="clr-namespace:SFC.Gate.Views"
        mc:Ignorable="d"
        xmlns:vm="clr-namespace:SFC.Gate.ViewModels"
        xmlns:cnv="clr-namespace:SFC.Gate.Converters"
        xmlns:cnf="clr-namespace:SFC.Gate.Configurations;assembly=SFC.Gate.Core"
        Title="{Binding SelectedItem.Tag, ElementName=MainTab}"
        Top="{Binding Source={x:Static cnf:Config.General},Path=WindowTop, FallbackValue=147}"
        Left="{Binding Source={x:Static cnf:Config.General},Path=WindowLeft, FallbackValue=147}"
        Height="{Binding Source={x:Static cnf:Config.General},Path=WindowHeight, FallbackValue=471}"
        Width="{Binding Source={x:Static cnf:Config.General},Path=WindowWidth, FallbackValue=741}">
    <Window.Resources>
   
          
        
    </Window.Resources>
    <Grid>
        <Image Source="pack://siteoforigin:,,,/bg.jpg" Stretch="UniformToFill"/>
        <Grid Visibility="{Binding Source={x:Static vm:MainViewModel.Instance},Path=CurrentUser,Converter={cnv:BooleanToVisibility}}">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
                <RowDefinition Height="*" />
            </Grid.RowDefinitions>

            <Grid VerticalAlignment="Top" Background="Transparent"
                         DataContext="{Binding Source={x:Static vm:MainViewModel.Instance}}">
                <Rectangle Fill="AntiqueWhite" Opacity="0.1"/>
                <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
                    <Menu Background="Transparent" HorizontalContentAlignment="Right">
                        <MenuItem Header="{Binding CurrentUser.Username}">
                            <MenuItem.HeaderTemplate>
                                <DataTemplate>
                                    <StackPanel Orientation="Horizontal">
                                        <Path Data="M21.576999,13.473151C26.414003,15.496185 30.259996,20.071221 31.999999,25.86432 15.448002,32.143386 0,25.86432 0,25.86432 1.7140042,20.158227 5.4690005,15.632174 10.202001,13.564156 11.338002,15.514191 13.444005,16.827195 15.862003,16.827195 18.317996,16.827195 20.455997,15.474182 21.576999,13.473151z M16.000003,0C19.617999,1.5323894E-07 22.550998,2.9330488 22.550998,6.5510722 22.550998,10.170134 19.617999,13.102144 16.000003,13.102144 12.381993,13.102144 9.4489957,10.170134 9.4489957,6.5510722 9.4489957,2.9330488 12.381993,1.5323894E-07 16.000003,0z" 
                                              Stretch="Uniform" Fill="#FFFFFFFF" 
                                              Width="24" Height="24" 
                                              VerticalAlignment="Center"
                                              Margin="0,0,0,0"
                                              RenderTransformOrigin="0.5,0.5"/>
                                        <TextBlock VerticalAlignment="Center" Text="{Binding}"
                                                   FontSize="12pt"
                                                   Margin="4,0" Foreground="White"/>
                                        <Path Data="M0,0L32,0 16,19.745z" 
                                              Stretch="Uniform" Fill="#FFFFFFFF" 
                                              Width="8" Height="10" 
                                              VerticalAlignment="Center"
                                              Margin="0,0,0,0"
                                              RenderTransformOrigin="0.5,0.5"/>
                                    </StackPanel>
                                </DataTemplate>
                            </MenuItem.HeaderTemplate>
                            <MenuItem Header="Change Password" Command="{Binding ChangePasswordCommand}"/>
                            <MenuItem Header="Logout" Command="{Binding LogoutCommand}"/>
                        </MenuItem>
                        <MenuItem Header="Guard Mode" Command="{Binding EnableGuardModeCommand}">
                            <MenuItem.HeaderTemplate>
                                <DataTemplate>
                                    <StackPanel Orientation="Horizontal">
                                        <Path Data="M13.299997,22.399994L13.299997,23.299988 15.200008,23.799988 17.000012,23.299988 17.000012,22.399994z M1.0999917,22.299988L1.0999917,23.299988 3.0000024,23.699997 4.7999914,23.199997 4.7999914,22.299988z M8.9000004,15.599991L9.5999983,15.599991 10.000007,16.199997 9.5000065,17.199997 9.0000065,17.199997 8.5000065,16.199997z M3.3999968,15.5L5.2999919,15.5C5.2999919,16,5.0999945,21.699997,8.2000035,23.299988L8.2999943,23.399994 9.0000065,17.399994 9.5999983,17.399994 10.299995,23.399994C10.299995,23.399994,13.500009,22.599991,13.200006,15.599991L14.900005,15.599991C16.8,15.599991,18.300002,16.799988,18.300002,18.299988L18.300002,32 0,32 0,18.299988C1.7292768E-07,16.699997,1.5000013,15.5,3.3999968,15.5z M3.5999938,8.2999878C4.7000006,9.1999969 6.899999,9.7999878 9.5000065,9.7999878 12.000008,9.7999878 14.299998,9.1999969 15.400005,8.3999939 15.500011,8.7999878 15.600002,9.2999878 15.600002,9.6999969 15.600002,13 12.900003,15.599991 9.5999983,15.599991 6.2999924,15.599991 3.5999935,13 3.5999938,9.6999969 3.3999966,9.1999969 3.5000027,8.6999969 3.5999938,8.2999878z M15.700008,5.3999939C16.000012,5.6999969 16.200009,6.0999908 16.200009,6.3999939 16.200009,7.8999939 13.200006,9.0999908 9.5999983,9.0999908 6.0000046,9.0999908 2.8999961,8 2.8999963,6.5 2.8999961,6.1999969 3.0999933,5.7999878 3.3999968,5.5L9.7999952,5.5z M9.2999943,0C13.600001,0 17.100018,1.0999908 17.100018,2.3999939 17.100018,3.6999969 13.600001,4.7999878 9.2999943,4.7999878 5.0000036,4.7999878 1.5000013,3.7999878 1.5000014,2.3999939 1.5000013,1 5.0000036,0 9.2999943,0z" 
                                              Stretch="Uniform" Fill="#FFFFFFFF" 
                                              Width="24" Height="24" 
                                              VerticalAlignment="Center"
                                              Margin="0,0,0,0"
                                              RenderTransformOrigin="0.5,0.5"/>
                                        <TextBlock VerticalAlignment="Center" Text="Guard Mode"
                                                   FontSize="12pt"
                                                   Margin="4,0,0,0" Foreground="White"/>
                                    </StackPanel>
                                </DataTemplate>
                            </MenuItem.HeaderTemplate>
                        </MenuItem>
                    </Menu>
                    
                </StackPanel>
                
            </Grid>
            
            <Grid Grid.Row="2" Margin="40,20,40,40">
                <TabControl TabStripPlacement="Left" x:Name="MainTab" x:FieldModifier="private"
                        SelectedIndex="{Binding Source={x:Static vm:MainViewModel.Instance},Path=SelectedTab,Mode=TwoWay}">
                    <TabItem Header="STUDENTS" Tag="SFC-Guihulngan [STUDENTS]">
                        <views:StudentFinder/>
                    </TabItem>
                    <TabItem Header="VISITORS" Tag="SFC-Guihulngan [VISITORS]">
                        <views:VisitorEntry/>
                    </TabItem>
                    <TabItem Header="VIOLATIONS" Tag="SFC-Guihulngan [VIOLATIONS]">
                        <views:Violations/>
                    </TabItem>
                    <TabItem Header="SMS" Tag="SFC-Guihulngan [SMS]">
                        <views:SmsSender/>
                    </TabItem>
                    <TabItem Header="USERS" Tag="SFC-Guihulngan [USERS]">
                        <views:Users/>
                    </TabItem>
                    <TabItem Header="LOGS" Tag="SFC-Guihulngan [LOGS]">
                        <views:Logs/>
                    </TabItem>
                    <TabItem Header="SETTINGS" Tag="SFC-Guihulngan [SETTINGS]">
                        <views:Settings/>
                    </TabItem>
                    <TabItem Header="Login" Tag="SFC-Guihulngan [LOGIN]"
                             IsSelected="True"
                             Visibility="{Binding Source={x:Static
            vm:MainViewModel.Instance},Path=CurrentUser,
            Converter={cnv:BooleanToVisibility Collapsed, Visible}}"/>
                </TabControl>
            </Grid>
        </Grid>
        <Rectangle Fill="White" Opacity="0.4" Visibility="{Binding Source={x:Static vm:MainViewModel.Instance},Path=IsDialogOpen,Converter={cnv:BooleanToVisibility}}"/>
        <views:Login Visibility="{Binding Source={x:Static
            vm:MainViewModel.Instance},Path=CurrentUser,
            Converter={cnv:BooleanToVisibility Collapsed, Visible}}"/>
        <views:GuardMode Visibility="{Binding Source={x:Static vm:MainViewModel.Instance},Path=IsGuardMode,Converter={cnv:BooleanToVisibility}}"/>
    </Grid>
</Window>
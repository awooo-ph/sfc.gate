<Window x:Class="SFC.Gate.Material.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:SFC.Gate.Material"
        mc:Ignorable="d"
        xmlns:md="http://materialdesigninxaml.net/winfx/xaml/themes"
        xmlns:views="clr-namespace:SFC.Gate.Material.Views"
        xmlns:viewModels="clr-namespace:SFC.Gate.Material.ViewModels"
        xmlns:converters="clr-namespace:SFC.Gate.Converters"
        TextElement.Foreground="{DynamicResource MaterialDesignBody}"
        TextElement.FontWeight="Regular"
        TextElement.FontSize="13"
        TextOptions.TextFormattingMode="Ideal"
        TextOptions.TextRenderingMode="Auto"
        Background="{DynamicResource MaterialDesignPaper}"
        FontFamily="{DynamicResource MaterialDesignFont}"        
        MinWidth="777" MinHeight="444"
        WindowStartupLocation="CenterScreen"
        SnapsToDevicePixels="True"
        WindowStyle="None"
        Icon="/icon.ico"
        ResizeMode="CanResize"
        Topmost="{Binding Screen,Converter={converters:EqualityConverter ReturnType=Boolean, Operand={x:Static viewModels:MainViewModel.GUARD_MODE}, Operation=Equals}}"
        DataContext="{Binding Source={x:Static viewModels:MainViewModel.Instance}}"
        Title="Saint Francis College" Height="555" Width="777">
  <Grid>
        <Grid.ColumnDefinitions>
          <ColumnDefinition Width="Auto"/>
          <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>

    <Grid Grid.Column="1" Background="#f5f6f6">

      <Grid.RowDefinitions>
        <RowDefinition Height="*"/>
        <RowDefinition Height="Auto"/>
      </Grid.RowDefinitions>
      <md:Transitioner SelectedIndex="{Binding Screen}">
        <md:TransitionerSlide>
          <views:Students/>
        </md:TransitionerSlide>
        <md:TransitionerSlide>
          <views:Faculty />
        </md:TransitionerSlide>
        <md:TransitionerSlide>
          <views:Visitors />
        </md:TransitionerSlide>
        <md:TransitionerSlide>
          <views:Users/>
        </md:TransitionerSlide>
        <md:TransitionerSlide >
          <views:GuardMode/>
        </md:TransitionerSlide>
        <md:TransitionerSlide>
          <views:Settings/>
        </md:TransitionerSlide>
        <md:TransitionerSlide>
          <views:Login/>
        </md:TransitionerSlide>
      </md:Transitioner>

      <md:Snackbar Grid.Row="1" HorizontalAlignment="Stretch"
                   Width="Auto" MessageQueue="{Binding MessageQueue}"/>
      
      <StackPanel Orientation="Horizontal"
                  Grid.Row="0"
                  VerticalAlignment="Top"
                  HorizontalAlignment="Right">
        <Button Style="{StaticResource WindowCommandButton}" Content="{md:PackIcon WindowMinimize}"
                Click="MinimizeClicked" />
        <Button Style="{StaticResource WindowCommandButton}"
                Click="MaximizeClicked"
                Content="{Binding RelativeSource={RelativeSource AncestorType=local:MainWindow},
                          Path=WindowState,Converter={converters:WindowStateToPackIcon }}" />
        <Button Style="{StaticResource WindowCloseButton}" Content="{md:PackIcon WindowClose}"
                Click="CloseClicked">

        </Button>
      </StackPanel>
    </Grid>

    <Grid Grid.Column="0" HorizontalAlignment="Left"
          x:Name="SideBar">
    <md:ColorZone Grid.Column="0"
                  Visibility="{Binding HasLoggedIn,Converter={converters:BooleanToVisibility}}"
                    Height="Auto"
                    Mode="Dark"
                  Width="Auto"
                  HorizontalAlignment="Left"
                    VerticalAlignment="Stretch">
      <Grid>
        <Grid.RowDefinitions>
          <RowDefinition Height="Auto"/>
          <RowDefinition Height="Auto" />
          <RowDefinition Height="*" />
          <RowDefinition Height="Auto" />
        </Grid.RowDefinitions>

        <Image Source="pack://application:,,,/sfc.png"
                 RenderOptions.BitmapScalingMode="HighQuality"
                 Height="48" Width="48"
                 Margin="7"/>
        <Separator Margin="17 0"
                     Grid.Row="1"
                     Height="2"/>
        <ListBox Grid.Row="2" Foreground="White"
                 Focusable="False"
                 KeyDown="Menu_OnKeyDown"
                 IsSynchronizedWithCurrentItem="True"
                 x:Name="Menu"
                 SelectedIndex="{Binding Screen}"
                 ScrollViewer.CanContentScroll="False"
                 HorizontalContentAlignment="Stretch"
                 Margin="0 4 0 0">
          <ListBoxItem>
            <StackPanel Margin="4">
              <md:PackIcon Kind="School"
                           Height="32"
                           HorizontalAlignment="Center"
                           Width="32"/>
              <TextBlock Text="STUDENTS"
                         HorizontalAlignment="Center"
                         FontSize="7pt"/>
            </StackPanel>
          </ListBoxItem>
          <ListBoxItem>
            <StackPanel Margin="4">
              <md:PackIcon Kind="HumanGreeting"
                           Height="32"
                           HorizontalAlignment="Center"
                           Width="32" />
              <TextBlock Text="STAFF"
                         HorizontalAlignment="Center"
                         FontSize="7pt" />
            </StackPanel>
          </ListBoxItem>
            <ListBoxItem>
            <StackPanel Margin="4">
              <md:PackIcon Kind="Incognito"
                           Height="32"
                           HorizontalAlignment="Center"
                           Width="32" />
              <TextBlock Text="VISITORS"
                         HorizontalAlignment="Center"
                         FontSize="7pt" />
            </StackPanel>
          </ListBoxItem>

          <ListBoxItem IsEnabled="{Binding CurrentUser.IsAdmin}">
            <StackPanel Margin="4">
              <md:PackIcon Kind="AccountMultipleOutline"
                           Height="32"
                           HorizontalAlignment="Center"
                           Width="32" />
              <TextBlock Text="USERS"
                         HorizontalAlignment="Center"
                         FontSize="7pt" />
            </StackPanel>
          </ListBoxItem>

          <ListBoxItem >
            <StackPanel Margin="4">
              <Path
                Data="M13.299997,22.399994L13.299997,23.299988 15.200008,23.799988 17.000012,23.299988 17.000012,22.399994z M1.0999917,22.299988L1.0999917,23.299988 3.0000024,23.699997 4.7999914,23.199997 4.7999914,22.299988z M8.9000004,15.599991L9.5999983,15.599991 10.000007,16.199997 9.5000065,17.199997 9.0000065,17.199997 8.5000065,16.199997z M3.3999968,15.5L5.2999919,15.5C5.2999919,16,5.0999945,21.699997,8.2000035,23.299988L8.2999943,23.399994 9.0000065,17.399994 9.5999983,17.399994 10.299995,23.399994C10.299995,23.399994,13.500009,22.599991,13.200006,15.599991L14.900005,15.599991C16.8,15.599991,18.300002,16.799988,18.300002,18.299988L18.300002,32 0,32 0,18.299988C1.7292768E-07,16.699997,1.5000013,15.5,3.3999968,15.5z M3.5999938,8.2999878C4.7000006,9.1999969 6.899999,9.7999878 9.5000065,9.7999878 12.000008,9.7999878 14.299998,9.1999969 15.400005,8.3999939 15.500011,8.7999878 15.600002,9.2999878 15.600002,9.6999969 15.600002,13 12.900003,15.599991 9.5999983,15.599991 6.2999924,15.599991 3.5999935,13 3.5999938,9.6999969 3.3999966,9.1999969 3.5000027,8.6999969 3.5999938,8.2999878z M15.700008,5.3999939C16.000012,5.6999969 16.200009,6.0999908 16.200009,6.3999939 16.200009,7.8999939 13.200006,9.0999908 9.5999983,9.0999908 6.0000046,9.0999908 2.8999961,8 2.8999963,6.5 2.8999961,6.1999969 3.0999933,5.7999878 3.3999968,5.5L9.7999952,5.5z M9.2999943,0C13.600001,0 17.100018,1.0999908 17.100018,2.3999939 17.100018,3.6999969 13.600001,4.7999878 9.2999943,4.7999878 5.0000036,4.7999878 1.5000013,3.7999878 1.5000014,2.3999939 1.5000013,1 5.0000036,0 9.2999943,0z"
                Stretch="Uniform" Fill="{Binding RelativeSource={RelativeSource AncestorType=ListBoxItem},Path=Foreground}"
                Width="32" Height="32"
                VerticalAlignment="Center"
                Margin="0,0,0,4"
                RenderTransformOrigin="0.5,0.5" />
              <TextBlock Text="GUARD"
                         HorizontalAlignment="Center"
                         FontSize="7pt" />
            </StackPanel>
          </ListBoxItem>
          <ListBoxItem >
            <StackPanel Margin="4">
              <md:PackIcon Kind="Settings"
                           Height="32"
                           HorizontalAlignment="Center"
                           Width="32" />
              <TextBlock Text="SETTINGS"
                         HorizontalAlignment="Center"
                         FontSize="7pt" />
            </StackPanel>
          </ListBoxItem>
        </ListBox>

        <Button Grid.Row="3" Style="{StaticResource MaterialDesignToolButton}"
              Padding="0"
                Margin="0 10"
                Height="Auto"
              Click="ButtonBase_OnClick">
          <Button.ContextMenu>
            <ContextMenu x:Name="ContextMenu">
              <MenuItem Header="My Profile" Command="{Binding ShowUserProfileCommand}"/>
              <MenuItem Header="Sign Out"
                        Command="{Binding LogoutCommand}" />
              <Separator/>
              <MenuItem Header="About Us" Command="{Binding ShowDevCommand}"/>
              <MenuItem Header="User Guide" Command="{Binding RunExternalCommand}" CommandParameter="https://github.com/awooo-ph/sfc.gate/wiki"/>
              <MenuItem Header="View Source" Command="{Binding RunExternalCommand}" CommandParameter="https://github.com/awooo-ph/sfc.gate" />
            </ContextMenu>
          </Button.ContextMenu>
          <StackPanel>
            <Border ClipToBounds="True"
                    HorizontalAlignment="Center"
                    Height="48" Width="48">
              <Border.OpacityMask>
                <VisualBrush>
                  <VisualBrush.Visual>
                    <Ellipse Height="7" Width="7" Fill="Red"/>
                  </VisualBrush.Visual>
                </VisualBrush>
              </Border.OpacityMask>
            <Image Source="{Binding CurrentUser.Picture,Converter={converters:BytesToImage}}"
                   Height="48"
                   ClipToBounds="True"
                   Stretch="UniformToFill"
                   VerticalAlignment="Center"/>
            </Border>
            <TextBlock Text="{Binding CurrentUser.Username}"
                       HorizontalAlignment="Center"
                       FontSize="7pt" />
          </StackPanel>
        </Button>
      </Grid>
    </md:ColorZone>
    </Grid>
  </Grid>
</Window>

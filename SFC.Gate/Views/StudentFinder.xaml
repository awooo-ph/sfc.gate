<UserControl x:Class="SFC.Gate.Views.StudentFinder"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:local="clr-namespace:SFC.Gate.Views"
             xmlns:views="clr-namespace:SFC.Gate.Views"
             mc:Ignorable="d" 
             xmlns:cnv="clr-namespace:SFC.Gate.Converters"
             xmlns:vm="clr-namespace:SFC.Gate.ViewModels"
             xmlns:models="clr-namespace:SFC.Gate.Models;assembly=SFC.Gate.Core"
             d:DesignHeight="300" d:DesignWidth="300">

    <Grid>
    <TabControl SelectedIndex="{Binding SelectedTab,Source={x:Static vm:Students.Instance},Mode=TwoWay}"
                IsEnabled="{Binding Source={x:Static vm:MainViewModel.Instance},Path=CurrentUser.StudentsAccess}">
            <TabControl.Effect>
                <BlurEffect Radius="{Binding Source={x:Static vm:MainViewModel.Instance},Path=CurrentUser.StudentsAccess,Converter={cnv:BooleanToObject 0, 7},FallbackValue=10}" 
                            KernelType="Gaussian" RenderingBias="Performance"/>
            </TabControl.Effect>
        <TabItem Header="All Students">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>
                <Grid Margin="4">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>
                    <TextBlock Text="SEARCH " VerticalAlignment="Center" />
                    <TextBox MinWidth="100" Grid.Column="1"/>
                </Grid>
                <ListView Grid.Row="1" Margin="4" SelectionMode="Extended"
                          SelectedItem="{Binding SelectedStudent,Source={x:Static vm:Students.Instance},Mode=TwoWay}"
                          ItemsSource="{Binding Source={x:Static models:Student.Cache}}">
                    <ListView.Resources>
                        <Style TargetType="{x:Type ListViewItem}">
                            <EventSetter Event="MouseDoubleClick" Handler="StudentList_DoubleClicked"/>
                            <Setter Property="IsSelected"
                                    Value="{Binding IsSelected,Mode=TwoWay}"/>
                            <Setter Property="ContextMenu">
                                <Setter.Value>
                                    <ContextMenu>
                                        <MenuItem Header="Edit" Command="{Binding Source={x:Static vm:Students.Instance},Path=EditStudentCommand}"/>
                                        <MenuItem Header="Delete" Command="{Binding SelectedStudent.DeleteCommand, Source={x:Static vm:Students.Instance}}"/>
                                        <MenuItem Header="Add Violation" Command="{Binding Source={x:Static vm:MainViewModel.Instance},Path=AddViolationCommand}"/>
                                    </ContextMenu>
                                </Setter.Value>
                            </Setter>
                        </Style>
                    </ListView.Resources>
                    <ListView.View>
                        <GridView>
                            <GridView.Columns>
                                <GridViewColumn Header="ID Number" DisplayMemberBinding="{Binding StudentId}"/>
                                <GridViewColumn Header="Firstname" DisplayMemberBinding="{Binding Firstname}"/>
                                <GridViewColumn Header="Lastname" DisplayMemberBinding="{Binding Lastname}"/>
                                <GridViewColumn Header="Year Level" DisplayMemberBinding="{Binding YearLevel}"/>
                                <GridViewColumn Header="Department" DisplayMemberBinding="{Binding Department}"/>
                            </GridView.Columns>
                        </GridView>
                    </ListView.View>
                 
                </ListView>
                <UniformGrid Grid.Row="2" Columns="5">
                    <Button Content="Print Selected" Margin="4" Command="{Binding Source={x:Static vm:Students.Instance},Path=PrintSelectedCommand}"/>
                    <Button Content="Print All" Margin="4" Command="{Binding Source={x:Static vm:Students.Instance},Path=PrintCommand}"/>
                    <Rectangle/>
                    <Button Content="Delete Selected" Margin="4"
                            Command="{Binding Source={x:Static vm:Students.Instance},Path=DeleteSelectedStudents}"/>
                    <Button Content="Delete All" Margin="4"
                            Command="{Binding Source={x:Static vm:Students.Instance},Path=DeleteAllStudents}"/>
                </UniformGrid>
            </Grid>
        </TabItem>
        <TabItem Header="Edit Student"
                 Visibility="{Binding SelectedStudent, Source={x:Static vm:Students.Instance}, Mode=TwoWay, Converter={cnv:BooleanToVisibility}}">
            <views:StudentInfo DataContext="{Binding Source={x:Static vm:Students.Instance},Path=SelectedStudent}"/>
        </TabItem>
        <TabItem Header="Add New">
            <views:StudentInfo DataContext="{Binding Source={x:Static vm:Students.Instance},Path=NewStudentHolder}"/>
        </TabItem>

    </TabControl>
        
            <Border CornerRadius="4" HorizontalAlignment="Center"
                    Visibility="{Binding Source={x:Static vm:MainViewModel.Instance},Path=CurrentUser.StudentsAccess,Converter={cnv:BooleanToVisibility Collapsed,Visible}}"
                    Background="#FF0000"
                    VerticalAlignment="Center">
                <StackPanel Orientation="Horizontal"
                            Margin="20">
                    <Path Margin="4"
                        Data="M15.396557,23.044006C14.220558,23.044006 13.268559,23.886993 13.268559,24.927994 13.268559,25.975006 14.220558,26.817001 15.396557,26.817001 16.572557,26.817001 17.523547,25.975006 17.523547,24.927994 17.523547,23.886993 16.572557,23.044006 15.396557,23.044006z M15.467541,5.1819992C15.447552,5.1819992 15.436566,5.1829987 15.436566,5.1829987 13.118533,5.5049973 13.055545,7.3330002 13.055545,7.3330002L13.055545,9.2929993 13.626531,16.539001C13.983558,18.357002 14.243538,19.020004 14.243538,19.020004 15.275555,19.975006 16.203567,19.25 16.203567,19.25 16.976548,18.565994 17.028552,16.962997 17.028552,16.962997 17.956563,9.2929993 17.696553,7.1029968 17.696553,7.1029968 17.608571,5.2839966 15.823561,5.1849976 15.490551,5.1819992 15.481549,5.1819992 15.473553,5.1819992 15.467541,5.1819992z M15.56355,0C15.56355,0 21.710574,4.1259995 31.581613,2.8030014 31.581613,2.8030014 33.634629,26.556992 15.56355,32 15.56355,32 -0.10249132,27.548004 0.00050565118,2.9670029 0.0005058694,2.9670029 10.72555,3.6309967 15.56355,0z" Stretch="Uniform" Fill="#FFFFFFFF"
                          RenderTransformOrigin="0.5,0.5"/>
                    <TextBlock Text="ACCESS DENIED" Foreground="White"
                                   Margin="4"
                                   FontWeight="Bold" FontSize="14pt"/>
                </StackPanel>

            </Border>
    </Grid>
</UserControl>
